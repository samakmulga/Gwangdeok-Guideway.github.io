<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>냥냥 공룡 게임</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #f7f7f7;
    }

    canvas {
      display: block;
      margin: 0 auto;
      background: #ddd;
    }

    .jump-button {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      padding: 25px 50px;
      font-size: 24px;
      font-weight: bold;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }

    .dialog {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 24px;
      font-weight: bold;
      color: #333;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 10px 20px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>
<body>
  <div class="dialog">공룡: 달린다냥! 북딱북딱!</div>
  <canvas id="gameCanvas" width="800" height="300"></canvas>
  <button class="jump-button">점프!</button>

  <script>
    (function () {
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");

      let dino = { x: 50, y: 200, width: 50, height: 50, velocityY: 0, isJumping: false };
      const gravity = 0.8;
      let obstacles = [];
      let gameSpeed = 5;
      let score = 0;

      const dinoDialogs = [
        "공룡: 달린다냥! 북딱북딱!",
        "공룡: 점프다냥! 이기야!",
        "공룡: 장애물 따위 어림도 없지!",
        "공룡: 야무지게 뛴다냥!",
        "공룡: 알잘딱깔센하게 간다냥!",
        "공룡: 킹받네! 장애물이 너무 많다냥!",
        "공룡: 응애 나 아기 공룡이다냥!",
        "공룡: 군침이 싹 도는 속도다냥!",
        "공룡: 점점 빨라진다냥! 북딱북딱!",
        "공룡: 최고 기록 갱신 간다냥!"
      ];

      function getRandomDialog() {
        return dinoDialogs[Math.floor(Math.random() * dinoDialogs.length)];
      }

      function drawDino() {
        ctx.fillStyle = "#ff5722";
        ctx.fillRect(dino.x, dino.y, dino.width, dino.height);
      }

      function updateDino() {
        if (dino.isJumping) {
          dino.velocityY += gravity;
          dino.y += dino.velocityY;

          if (dino.y >= 200) {
            dino.y = 200;
            dino.velocityY = 0;
            dino.isJumping = false;
          }
        }
      }

      function drawObstacles() {
        ctx.fillStyle = "#333";
        obstacles.forEach((obstacle) => {
          ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
        });
      }

      function updateObstacles() {
        obstacles.forEach((obstacle) => {
          obstacle.x -= gameSpeed;
        });

        obstacles = obstacles.filter((obstacle) => obstacle.x + obstacle.width > 0);

        if (Math.random() < 0.03) {
          const height = Math.random() < 0.5 ? 50 : 80;
          obstacles.push({ x: 800, y: 300 - height, width: 20, height: height });
        }
      }

      function jumpDino() {
        if (!dino.isJumping) {
          dino.isJumping = true;
          dino.velocityY = -15;
          updateDialog(getRandomDialog());
        }
      }

      function updateDialog(message) {
        const dialog = document.querySelector(".dialog");
        dialog.textContent = message;
        dialog.style.opacity = 1;
        setTimeout(() => {
          dialog.style.opacity = 0.9;
        }, 3000); // 대사 오래 띄움
      }

      document.addEventListener("keydown", (e) => {
        if (e.code === "Space" || e.code === "ArrowUp") {
          jumpDino();
        }
      });

      document.querySelector(".jump-button").addEventListener("click", jumpDino);

      function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawDino();
        drawObstacles();
        updateDino();
        updateObstacles();

        score += 1;
        if (score % 500 === 0) {
          gameSpeed += 1;
          updateDialog(`공룡: 스피드 업이다냥! 점수: ${score}`);
        }

        requestAnimationFrame(gameLoop);
      }

      gameLoop();
    })();
  </script>
</body>
</html>
